# TCP与UDP

TCP与UDP均是传输层协议，他们可以传输图片、音频、视频等 TCP是基于连接，传输可靠，UDP是基于非连接的，传输不可靠，会直接将数据发送至网卡
类比两个人之间通信的话，写信和打电话 其中打电话就相当于TCP，写信就相当于UDP。
写信：对方能否正常收到，内容是否完整，顺序是否正确。(UDP)
打电话：电话接通，互相通话，结束挂断。（TCP）

1.TCP是如何保证传输可靠的： 通过三次握手四次挥手

2.三次握手：建立链接的过程，1.客户端发送SYN包。2.服务端发送SYN+ACK包。3.客户端发送ACK包


3.为什么要三次握手而不是两次握手：如果客户端发送的一个SYN包由于网络问题并没有到达服务器，为了建立连接客户端会
重新发送SYN包，服务端正常收到，此时第一个SIN包突然又发送过来了，这是服务端会认为这是客户端发送的新链接，
结果导致两次握手后进入等待数据状态，服务端认为是两个链接，客户端认为是一个链接导致状态不一致。如果三次的话服务端收不到ACK包
就会认为这不是有效的链接，这样就可以保证在不可靠的信道上简历可靠的链接。

4.建立链接后如何处理丢包问题，如何处理乱序问题：客户端在发送前会建立一个缓冲区[0,1,2,3,4,5,6....]
客户端发送报文ACK（由序列号+长度+发送缓冲区的部分内容）。
服务端回复ACK（序列号+长度）这样客户端就会计算出下一次发送的序列号。
同时客户端也可以切割发送多包，服务端只需回复一个包，如果丢失，服务端会重新发送ACK客户端进行补齐，TCP是全双工的。


5.四次挥手:客户端发送FIN包，服务器发送ACK包，服务端发送FIN包，客户端发送ACK包，客户端发送ACK包之后，会进入等待状态，
服务端收到ACK后会立即关闭链接。

6.第四次挥手为什么客户端要等待超时时间：为了保证对方已收到ACK包，如果客户端发送ACK包后直接关闭链接，如果ACK丢包，服务端会一直等待。这是服务端会重发FIN包
并刷新超时时间。

7.TCP与UDP区别
TCP性能损耗多，资源消耗多，稳定可靠（文件，邮件，网页）
UDP性能损耗少，资源占用少，稳定性弱（语音通话，视频会议）




