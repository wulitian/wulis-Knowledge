# vue中的keep-alive

#### props

1. include字符串或正则，名称匹配的会被缓存。
2. exclude字符串或正则，名称匹配的不会被缓存。
3. max数字，最多可以缓存多少组件。
4. keep-alive包裹的动态组件会缓存不活动的组件。

#### 主要流程

1. 判断组件name,不在include或者在exclude中直接返回vnode，说明该组件不会被缓存。
2. 获取组建的key，如果有获取的实例key，否则重新生成。
3. key生成规则，cid+::+tag,仅靠cid是不够的，因为相同的构造函数可以注册不同的本地组件。
4. 如果缓存对象内存在，则直接从缓存中获取组件实例给vnode，不存在则添加到缓存对象中。
5. 最大缓存数量，当缓存数量超过max清楚keys的第一个组件。
6. LRU缓存策略，从内存中找出最久没有使用的数据置换成新数据，细节，将数据插入到链表头部，每次缓存数据被访问，将数据移动到链表头部，链表满的时候将链表尾部丢弃。