# http2协议

#### 精简回答：

1. 二进制协议：http2是一个二进制协议。http1.1版本头信息必须是文本（ascii）数据体可以是文本，也可以是二进制，http2彻底是二进制协议，头信息和数据体都是二进制，统称为帧，可以分为头信息帧，和数据帧，帧的概念是它实现多路复用基础

2. 多路复用：http2实现多路复用，http2仍然复用tcp连接，但是在这个链接里面，客户端可以服务器都可以发送多个请求，或回应，而且不用按照顺序发送，这样避免队头堵塞问题

3. 数据流：http2使用数据流概念，因为http2不按照顺序发送，同一个连接有连续的数据包，成为数据流，每个数据流都有独一无二的编号。数据包发送时候，都必须标记数据流id，用来区分属于哪个数据流

4. 头部信息压缩：HTTP/2 实现了头信息压缩，由于 HTTP 1.1 协议不带有状态，每次请求都必须附上所有信息。所以，请求的很多字段都是 重复的，比如 Cookie 和 User Agent ，一模一样的内容，每次请求都必须附带，这会浪费很多带宽，也影响速度。HTTP/2 对这一点做了优化，引入了头信息压缩机制。一方面，头信息使用 gzip 或 compress 压缩后再发送；另一方面， 客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样字段了，只发送索引 号，这样就能提高速度了。

5. 服务器推送：HTTP/2 允许服务器未经请求，主动向客户端发送资源，这叫做服务器推送。使用服务器推送，提前给客户端推送必要的资源 ，这样就可以相对减少一些延迟时间。这里需要注意的是 http2 下服务器主动推送的是静态资源，和 WebSocket 以及使用 SSE 等方式向客户端发送即时数据的推送是不同的。

6. http2协议缺点：因为 HTTP/2 使用了多路复用，一般来说同一域名下只需要使用一个 TCP 连接。由于多个数据流使用同一个 TCP 连接，遵 守同一个流量状态控制和拥塞控制。只要一个数据流遭遇到拥塞，剩下的数据流就没法发出去，这样就导致了后面的所有数据都 会被阻塞。HTTP/2 出现的这个问题是由于其使用 TCP 协议的问题，与它本身的实现其实并没有多大关系。

7. http3协议：由于 TCP 本身存在的一些限制，Google 就开发了一个基于 UDP 协议的 QUIC 协议，并且使用在了 HTTP/3 上。 QUIC 协议在 UDP 协议上实现了多路复用、有序交付、重传等等功能
