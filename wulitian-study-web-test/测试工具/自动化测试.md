#### 关于工程化中的测试

## 自动化测试

用其他代码检测当前项目代码是够正确

## 分类的几种类型

-   单元测试：主要针对程序中最小可测试单元（一般指方法，类）的测试，具备投入小、收益产出高的特征，可以较早期地发现代码缺陷，适用于公共函数库的测试。

-   集成测试：集成测试主要包括模块接口测试，子功能模块集成起来的功能模块测试等，目的是为了验证在单元测试的基础上，所有模块集成起来的子系统、子功能是否仍然满足质量目标。

-   ui 测试类似于 E2E 测试 ui 测试只是针对于前端测试而 E2E 测试是针对整个应用的并且环境也是真实环境。

-   E2E 测试：端到端测试的主要目的是从软件使用者角度来检验软件的质量，如打开浏览器，进行一系列的操作，验证界面或功能是否符合预期。

## 适合引入自动化测试场景

-   公共库的开发

-   中长期项目迭代与重构

-   引入了不可控的第三方依赖

## 测试工具测选择

-   单元测试工具

Mocha:是生态最好，使用最广泛的单测框架，但是他需要较多的配置来实现它的高扩展性

Ava:是更轻量高效简单的单测框架，但是自身不够稳定，并发运行文件多的时候会撑爆 CPU。

Jasmine:是单测框架的“元老”，开箱即用，但是异步测试支持较弱。

Jest:基于 Jasmine, 做了大量修改并添加了很多特性，同样开箱即用，但异步测试支持良好。

Karma:能在真实的浏览器中测试，强大适配器，可配置其他单测框架，一般会配合 Mocha 或 Jasmine 等一起使用。

每个框架都有自己的优缺点，没有最好的框架，只有最适合的框架。Augular 的默认测试框架就是 Karma + Jasmine，而 React 的默认测试框架是 Jest。
Jest 被各种 React 应用推荐和使用。它基于 Jasmine，至今已经做了大量修改并添加了很多特性，同样也是开箱即用，支持断言，仿真，快照等。Create React App 新建的项目就会默认配置 Jest，我们基本不用做太多改造，就可以直接使用

-   集成测试工具

## 测试思想

TDD(测试驱动开发)：要求在编写某个功能的代码之前先编写测试代码，然后只编写使测试通过的功能代码，通过测试来推动整个开发的进行

BDD(行为驱动开发)：可以让项目成员（甚至是不懂编程的）使用自然语言来描述系统功能和业务逻辑，从而根据这些描述步骤进行系统自动化的测试

## 金字塔测试模型

单元测试=》接口测试=》E2E 测试，底层投入最多，等曾投入最小，推荐在单元层面发现问题。目前来看很少有团队做单元测试是因为人员缺少问题，并且一旦投入，修改业务代码时还需要修改测试用例。因此有些人又提出了倒金字塔，进行回归测试。

## 蜂窝测试模型

服务端测试模型，集中在集成测试，因为微服务中如果每个微服务中放置太多测试用例不是最佳选择

## 奖杯测试模型

静态测试=》单元测试=》集成测试=》E2E 测试
